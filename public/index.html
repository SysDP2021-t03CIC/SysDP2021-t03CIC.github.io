<!DOCTYPE html>
<html lang="ja-jp">
  <head>
  <meta charset="utf-8">
  <title>システム創成2021 CIC担当チーム 引継ぎ資料</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="generator" content="Hugo 0.91.0" />
  <meta name="description" content="システム創成2021 CIC担当チーム 引継ぎ資料 - システム創成2021 CIC担当チーム 引継ぎ資料 ">
  
  <!-- ** CSS Plugins Needed for the Project ** -->
  
  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://sysdp2021-t03cic.github.io/plugins/bootstrap/bootstrap.min.css">

  <!-- themefy-icon -->
  <link rel="stylesheet" href="https://sysdp2021-t03cic.github.io/plugins/themify-icons/themify-icons.css">

  <!--Favicon-->
  <link rel="icon" href="https://sysdp2021-t03cic.github.io/images/favicon.png" type="image/x-icon">

  <!-- fonts -->
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel="stylesheet">

  <!-- PDF.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.js"></script>
  
  <style>
  :root{
    --primary-color:#1c7cc5;
    --body-color:#f9f9f9;
    --text-color:#636363;
    --text-color-dark:#242738;
    --white-color:#ffffff;
    --light-color:#f8f9fa;
    --font-family:Lato;
  }
  </style>

<!-- Main Stylesheet -->

<link href="https://sysdp2021-t03cic.github.io/css/style.min.css" rel="stylesheet" media="screen"/>
  
<!-- ** JS Plugins Needed for the Project ** -->

<!-- jquiry -->
<script src="https://sysdp2021-t03cic.github.io/plugins/jquery/jquery-1.12.4.js"></script>

<!-- jquary ui -->
<script src="https://sysdp2021-t03cic.github.io/plugins/jquery/jquery-ui.js"></script>

<!-- Bootstrap JS -->
<script src="https://sysdp2021-t03cic.github.io/plugins/bootstrap/bootstrap.min.js"></script>

<!-- match-height JS -->
<script src="https://sysdp2021-t03cic.github.io/plugins/match-height/jquery.matchHeight-min.js"></script>


  

  <!-- create /layouts/partials/overrides/header.html in your own theme or root directory to add your custom content here -->








<meta name="twitter:title" content="システム創成2021 CIC担当チーム 引継ぎ資料"/>
<meta name="twitter:description" content="This is meta description"/>



<meta property="og:title" content="システム創成2021 CIC担当チーム 引継ぎ資料" />
<meta property="og:description" content="This is meta description" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://sysdp2021-t03cic.github.io/" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="システム創成2021 CIC担当チーム 引継ぎ資料"/>
<meta name="twitter:description" content="This is meta description"/>


</head>

  
  <body>
    
    <!-- header -->
    <header class="banner overlay bg-cover" data-background="https://sysdp2021-t03cic.github.io/images/banner.jpg">
      <nav class="navbar navbar-expand-md navbar-dark">
  <div class="container px-2 px-md-0">
    <a class="navbar-brand px-2" href="/">
      
      
      
      システム創成2021 CIC担当チーム 引継ぎ資料
      
    </a>
    <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation"
      aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse text-center" id="navigation">
      <ul class="navbar-nav ml-auto">
        
        
        <li class="nav-item">
          <a class="nav-link text-dark" href="https://sysdp2021-t03cic.github.io/">Home</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-dark" href="https://sysdp2021-t03cic.github.io/address">contact</a>
        </li>
        
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            docs
          </a>
          <div class="dropdown-menu">
            
            <a class="dropdown-item" href="https://sysdp2021-t03cic.github.io/unity">Unity</a>
            
            <a class="dropdown-item" href="https://sysdp2021-t03cic.github.io/tello">Tello</a>
            
            <a class="dropdown-item" href="https://sysdp2021-t03cic.github.io/opencv">OpenCV</a>
            
            <a class="dropdown-item" href="https://sysdp2021-t03cic.github.io/howtouse">How to use</a>
            
            <a class="dropdown-item" href="https://sysdp2021-t03cic.github.io/editS">How to edit</a>
            
          </div>
        </li>
        
        
      </ul>
      
    </div>
  </div>
</nav>

      <!-- banner -->
<div class="container section">
	<div class="row">
		<div class="col-lg-8 text-center mx-auto">
			<h1 class="text-white mb-3">システム創成2021 CIC担当チーム
引継ぎ資料</h1>
			<p class="text-white mb-4"></p>
			<div class="position-relative">
				<input id="search" class="form-control" placeholder="">
				<i class="ti-search search-icon"></i>
				
				
				
				
				<script>
					$(function() {
					var projects = [
						
						{
							value: "デスクトップPCを使う時の準備",
							label: "<p> 予め電源タップを用意しておく  コンセントが足りない場合が多い   使用後に元通りに収納できるように、箱の中の状態を覚えておく ケーブルの長さを考慮し、機材の配置を考える  電源ケーブルが最も短いので、それを最優先に   プロジェクターを使用する場合は、表示域を考慮して配置する 機材を配置したら適宜配線する PCを起動したら、steamにログインする  ログインしないとsteamVRが正常に動作しない    </p><p>PC</p><p>使い方</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/howtouse\/pc\/setup\/"
						},
						
						{
							value: "Bunshin Drone 3 システムの運用方法",
							label: "<p> 必要な人員  ユーザ1（VRヘッドセットを装着する人） ユーザ2（帽子を被り、ドローンに追従される人） システム運用者（PCを操作する）     Unityエディタを起動する。 ユーザ1はVRヘッドセットReverb G2を装着する  参照先   ユーザ2は帽子を被る PCとTelloを接続する  参照先   Telloをユーザ2の後方に置く システム運用者がUnityエディタ上で実行ボタンをクリックする ユーザ1が見ている映像にUIが表示される。右手のコントローラーをUIに当てて操作する  実は左手のコントローラーを対応させるのが間に合わなかった   Telloのカメラ映像が表示されなければ、最初からやり直す 正常動作していれば、Telloが離陸しユーザ2を探す Telloがユーザ2を視認し追従し始めたら、ユーザ2は歩行し始める システム運用終了時は、システム運用者がPCのキーボードの「L」キーを押す  Lは「land」（着陸）のL   システム運用者はUnityエディタ上で実行終了ボタンをクリックする。 速やかにTelloの電源をOFFにする。  </p><p>システム</p><p>使い方</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/howtouse\/system\/operation\/"
						},
						
						{
							value: "Telloを使う時の手順",
							label: "<p> Telloを起動後速やかに離陸させるため、予めUnityなどは起動しておく。  Telloは電源がONになっている間、自動的に発熱してオーバーヒートする。 Telloが飛ぶときプロペラが発する風でTello自体を冷却する。   Telloの中を覗き、SSIDを確認する。 Telloにバッテリーを取り付け、電源ボタンを押す。  使っていないバッテリーは必ず充電しておく。   PCのWi-Fi設定を開き、TelloのSSIDを選択する。  Telloに接続している間、PCはインターネットに繋がらない。   Wi-Fi接続が完了したら、速やかにシステムを開始しTelloを離陸させる。  </p><p>Tello</p><p>ドローン</p><p>使い方</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/howtouse\/tello\/setup\/"
						},
						
						{
							value: "Reverb G2を使う時の準備",
							label: "<p> 配線  ヘッドセットにケーブルを繋ぐ  ヘッドセットのフェイスクッションを外す ヘッドセットにケーブルを接続する。しっかり奥まで差さないと反応しない ヘッドセットにフェイスクッションを取り付ける   電源ケーブルを繋ぐ DisplayPortケーブルをPCに接続する  マザーボードではなくグラフィックボードの端子に繋ぐ   USB Type-CケーブルにType-A変換アダプタを取り付ける Type-A変換アダプタをUSB3.0端子に取り付ける  必ずUSB3.0の端子に差すこと。2.0では動作しない     ケーブルの抜き差し  エラーメッセージが出た場合は、PCに刺さっているケーブルを他の端子に差し替える エラーが無くなり正常動作するまで試す   Mixed Reality ポータルの設定  Mixed Realityポータル アプリにて「部屋の境界線のセットアップ」を選択する PC画面上の指示に従って設定する   前回と同じ部屋で使用するならこの設定は必要無い   装着  ヘッドバンドを緩めに調整する ヘッドバンドを上に上げる ゴーグル部分を顔に当てる ヘッドバンドを下げる ヘッドバンドを締める スピーカーの位置を調整する    </p><p>VR</p><p>Reverb G2</p><p>使い方</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/howtouse\/reverbg2\/setup\/"
						},
						
						{
							value: "ARマーカーの値の取得",
							label: "<p>1. IDの取得 ids.rows() で検出できたIDの個数を取得。個数が0個より多いとき、各ARマーカーの座標・回転を取得\n\/\/ IDの数が検出できたARマーカーの数 idsNum = ids.rows(); if (idsNum \u0026gt; 0) { \/\/ 各ARマーカーのIDを格納  idsArr = new int[idsNum]; ids.get(0, 0, idsArr); \/\/ ← ここで検出したARマーカーのIDを配列に  detected = true; EstiamtePoseMarkers(); } 2. 各ARマーカーの座標・回転を取得   検出した各ARマーカーの平行移動・回転ベクトルを計算   Aruco.estimatePoseSingleMarkers(\/*各ARマーカーの角の画像座標*\/, \/*ARマーカー1辺の長さ(m)*\/, \/*内部行列*\/, \/*歪み係数*\/, \/*各ARマーカーの回転ベクトル(Out)*\/, \/*各ARマーカーの平行移動ベクトル(Out)*\/) で平行移動・回転ベクトルを取得。\nその後、rVecs,tVecsを計算しやすい配列にし、回転ベクトルをオイラー角に変換している。\nまた、追従対象の情報を計算しやすいように構造体を定義している。\npublic struct ARMarker { public int ID; public double[] tArr; public double[] rArr; public void Set_tArr(Mat tVec) { tArr = new double[3]; tVec.get(0, 0, tArr); } public void Set_rArr(Mat rVec) { rArr = new double[3]; rVec.get(0, 0, rArr); } } \/\/ 省略  private void EstiamtePoseMarkers(float markerLength = 0.06F) { if (idsArr.Length \u0026lt; 1) return; Mat rVecs = new Mat(), tVecs = new Mat(); \/\/ tVecs は 要素数が1、チャンネル数が3で得られる  \/\/ rVecs も同様に 要素数が1、チャンネル数が3で得られる  Aruco.estimatePoseSingleMarkers(corners, markerLength, cameraMat, distMat, rVecs, tVecs); \/* * rVecs : CV_64FC3 * channels : 3 * rows : 検知したARマーカーの数 * cols : 1 *\/ \/* * tVecs : CV_64FC3 * channels : 3 * rows : 検知したARマーカーの数 * cols : 1 *\/ ARMarker[] markers = new ARMarker[idsArr.Length]; int i; for (i = 0; i \u0026lt; idsArr.Length; i\u002b\u002b) { \/\/ IDを格納  markers[i].ID = idsArr[i]; \/\/ i番目のARマーカーの位置ベクトルを格納  markers[i].Set_tArr(tVecs.row(i)); \/\/ i番目のARマーカーの位置ベクトルを取り出してベクトルの形にする  Mat _tVec = new Mat(3, 1, CvType.CV_64FC1); _tVec.put(0, 0, markers[i].tArr); \/\/ 一旦i番目のARマーカーの回転ベクトルを格納  markers[i].Set_rArr(rVecs.row(i)); \/\/ i番目のARマーカーの回転ベクトルを取り出してベクトルの形にする  Mat _rVec = new Mat(3, 1, CvType.CV_64FC1); _rVec.put(0, 0, markers[i].rArr); \/\/ 回転ベクトルから回転行列への変換を行う  \/\/ rmatrix 3×3の回転行列  Mat rMat = new Mat(); Calib3d.Rodrigues(_rVec, rMat); \/* * rMat * channels : 1 * rows : 3 * cols : 3 *\/ \/\/ 行列の拡大  Mat projMat = new Mat(); List\u0026lt;Mat\u0026gt; src = new List\u0026lt;Mat\u0026gt; { rMat, new Mat(3,1,CvType.CV_64FC1,new Scalar(0)) }; \/\/ rMat(3×3) → projMat(3×4)へ変換  Core.hconcat(src, projMat); \/\/ オイラー角以外で必要のない値も受け取る必要があるので宣言しておく  Mat cameraMatrix = new Mat(), rotMatrixX = new Mat(), rotMatrixY = new Mat(), rotMatrixZ = new Mat(), eulerAngles = new Mat(); \/* オイラー角への変換 * projMatrix : input : 3×4 Mat * cameraMatrix : output : 3×3 Mat * rotMatrix : output : 3×3 Mat * transVect : output : 4×1 Mat * eulerAngles : output : 3×1 Mat ← この出力だけ必要 *\/ Calib3d.decomposeProjectionMatrix(projMat, cameraMatrix, rMat, _tVec, rotMatrixX, rotMatrixY, rotMatrixZ, eulerAngles); \/* * eulerAngles * channels : 1 * rows : 3 * cols : 1 *\/ \/\/ i番目のARマーカーの回転ベクトルを格納  markers[i].Set_rArr(eulerAngles); } CalcTargetRotation(markers); } </p><p>画像処理</p><p>推定</p><p>追従対象</p><p>認識</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/opencv\/recognition\/estimatetarget\/"
						},
						
						{
							value: "OpenCV for Unity",
							label: "<p>2021年度の開発で最終的に利用したアセット\n  ダウンロード   OpenCV for Unity\n概要欄の「Trail \u0026amp; Demo」に試用版もある\n2021年度の開発で利用したバージョンは2.4.5\n  利用 アセットストアで購入(もしくは試用版) をダウンロードし、インポートする。\nPluginsは使っているPCに合わせる  メソッドの説明 正直引き継ぎでアプリ実行するだけなら、見る必要は無いが少しだけメソッドの説明をしておく。   Matクラスのインスタンス生成 new Mat(\/*行数*\/, \/*列数*\/, \/*CvType.CV_[成分の型]C[チャンネル数]*\/) ※成分の型:(例)double型 → 64F, short型 → 32S等\n※チャンネル:行列の成分の表し方(行,列)にもう1つ要素が加わったもの(というイメージ)  Matに具体的な数値を格納する Mat.put(\/*数値を入れ始める行の目*\/, \/*列の目*\/, \/*具体的な数値の格納された配列*\/)   Matから具体的な数値を取り出す Mat.get(\/*取り出す初める行の目*\/, \/*列の目*\/, \/*取り出した数値を格納する配列*\/)   Mat同士の結合(横に並べる結合) Core.hconcat(\/*結合するMatのList*\/, \/*結合結果を格納するMat*\/)     その他のメソッドの内容もリファレンスで見ることができる。\n  参考  OpenCV for Unity 入門 (1) - 事始め pythonでArUcoライブラリを使ってARマーカの位置とか角度とか知る pythonでARマーカーの姿勢推定 OpenCV for Unityのリファレンス    </p><p>画像処理</p><p>OpenCV</p><p>OpenCV for Unity</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/opencv\/introduction\/opencvforunity\/"
						},
						
						{
							value: "Unityプロジェクト",
							label: "<p>SteamVRを用いた開発\nUnityプロジェクト内での開発\nBlenderを用いた3Dモデル製作\n</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/unity\/"
						},
						
						{
							value: "OpenCVの基礎知識",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/opencv\/introduction\/"
						},
						
						{
							value: "SteamVRを用いた開発",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/unity\/steamvr\/"
						},
						
						{
							value: "Telloについて",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/tello\/tello\/"
						},
						
						{
							value: "デスクトップPCの使い方",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/howtouse\/pc\/"
						},
						
						{
							value: "初期セットアップ",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/edit\/setup\/"
						},
						
						{
							value: "Windows Mixed Realityの使い方",
							label: "<p>基本操作  トリガーボタン 選択。マウスでいう左クリック Aボタン, Xボタン 決定 Bボタン, Yボタン キャンセル, 戻る グリップボタン VRアプリケーションでは物を掴む操作に使われる事が一般的 メニューボタン VRアプリケーション内でメニューを開く時に使う Windowsボタン スタートメニューを開く Windowsボタン \u002b グリップボタン ヘッドセットのカメラで撮影した現実世界の映像を表示   ホームメニュー（クリフハウス）での操作  アナログスティックを前に倒す ポイントした場所へ移動 アナログスティックを左右に倒す 方向転換 アナログスティックを後方に倒す 後方へ移動   スクリーンショットや録画 スタートメニューを開き、メニュー下部のアイコンを選択するとスクリーンショットや録画が撮れる。 録画の終了は開始と同じ操作。 音声操作 使い道は無いが音声操作にも対応している。誤爆に注意。 Steam VRとWindows Mixed Realityを組み合わせた場合の操作 アナログスティックを押し込むとsteam VRのメニューが開く。\n</p><p>VR</p><p>使い方</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/howtouse\/reverbg2\/windowsmixedreality\/"
						},
						
						{
							value: "OpenCVSharp",
							label: "<p>2021年度の開発で断念したOpenCVライブラリの.NET用ラッパー 1. TextureをMatに変換する関数がない 2. 変換関数を自作したが動作が遅かった これらの理由から利用を断念。OpenCV for Unityの方を利用した。\nOpenCVSharpの導入 1. NuGetの導入  NuGetForUnityから「NuGEtForUnity.〇.〇.〇.unitypackage」をダウンロード  「NuGEtForUnity.〇.〇.〇.unitypackage」をAssetsフォルダにドラッグ\u0026amp;ドロップ  全てチェックを付けたままインポート   2. OpenCVSharpの導入  UnityEditorのヘッダーメニュー「NuGet」→「Manage Nuget Packages」を選択  「OpenCVSharp」を検索しインストール  OpenCVSharp3の場合は、OpenCVSharp3-AnyCPU OpenCVSharp4の場合は、OpenCVSharp4.WindowsやOpenCVSharp4\u002bOpenCVSharp4.runtime.○○    opencvsharpからインストールしたバージョンに近いもののzipファイルをダウンロード ダウンロードしたファイルにある「OpenCvSharp\u0026hellip;\/Native\/Lib\/\u0026hellip;\/OpenCVSharpExtern.dll」を「Assets\/Packages\/OpenCvSharp\u0026hellip;\/lib\/netstandard2.0」にコピー   </p><p>画像処理</p><p>OpenCV</p><p>OpenCVSharp</p><p>断念</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/opencv\/introduction\/opencvsharp\/"
						},
						
						{
							value: "数式的な解説",
							label: "<p>MathJax.Hub.Config({\rtex2jax: {\rinlineMath: [[\u0027$\u0027,\u0027$\u0027], [\u0027\\\\(\u0027,\u0027\\\\)\u0027]],\rdisplayMath: [[\u0027$$\u0027,\u0027$$\u0027], [\u0027\\\\[\u0027,\u0027\\\\]\u0027]],\rprocessEscapes: true,\rprocessEnvironments: true,\rskipTags: [\u0027script\u0027, \u0027noscript\u0027, \u0027style\u0027, \u0027textarea\u0027, \u0027pre\u0027],\rTeX: { equationNumbers: { autoNumber: \u0022AMS\u0022 },\rextensions: [\u0022AMSmath.js\u0022, \u0022AMSsymbols.js\u0022] }\r}\r});\rMathJax.Hub.Queue(function() {\r\/\/ Fix  tags after MathJax finishes running. This is a\r\/\/ hack to overcome a shortcoming of Markdown. Discussion at\r\/\/ https:\/\/github.com\/mojombo\/jekyll\/issues\/199\rvar all = MathJax.Hub.getAllJax(), i;\rfor(i = 0; i ARマーカーの持つ値 各ARマーカーから得られる値は以下の3つ\n  座標の値:$[tx, ty, tz]$   回転の値:$[rx, ry, rz]$   ID :$id$\n   認識できたARマーカーを$AR = [AR_0, \\ldots , AR_n]$として、各ARマーカーの持つ値を$AR_i.id$のように表す。\n追従対象の情報を計算 追従対象の情報を得る式を説明する。図の灰色の部分は自動追従で使わない情報。\n  座標 追従対象の座標$[tx,ty,tz]$は\n$[tx, ty, tz] = [\\frac{\\sum_{n}^{i=0}AR_i.tx}{n}, \\frac{\\sum_{n}^{i=0}AR_i.ty}{n}, \\frac{\\sum_{n}^{i=0}AR_i.tz}{n}]$\nで求める。\n  回転 追従対象の回転$[rx,ry,rz]$は\n$[rx, ry, rz] = [\\frac{\\sum_{n}^{i=0}AR_i.rx \u002b AR_i.id \\times 90}{n}, \\frac{\\sum_{n}^{i=0}AR_i.ry \u002b AR_i.id \\times 90}{n}, \\frac{\\sum_{n}^{i=0}AR_i.rz \u002b AR_i.id \\times 90}{n}]$\nで求める。\nただし、$AR_i.id$が$0$で、回転の値が負の場合$\u002b360$する。  方向 追従対象の方向はそれぞれ  左右の方向 : $arctan(\\frac{tx}{tz})$ 上下の方向 : $arctan(\\frac{ty}{tz})$\nで求める。    距離 カメラから追従対象の距離は\n$d = \\sqrt{tx^2 \u002b ty^2 \u002b tz^2}$ で求める。  コード private void CalcTargetRotation(ARMarker[] markers) { if (markers.Length \u0026lt; 1) return; Array.Clear(position, 0, position.Length); Array.Clear(rotation, 0, rotation.Length); int i, j; for (i = 0; i \u0026lt; markers.Length; i\u002b\u002b) { for (j = 0; j \u0026lt; markers[i].rArr.Length; j\u002b\u002b) { if (markers[i].ID == 0 \u0026amp;\u0026amp; markers[i].rArr[j] \u0026lt; 0) markers[i].rArr[j] \u002b= 360; rotation[j] \u002b= markers[i].ID * 90 \u002b markers[i].rArr[j]; } for (j = 0; j \u0026lt; markers[i].tArr.Length; j\u002b\u002b) { position[j] \u002b= markers[i].tArr[j]; } } for (j = 0; j \u0026lt; position.Length; j\u002b\u002b) position[j] \/= markers.Length; for (j = 0; j \u0026lt; rotation.Length; j\u002b\u002b) rotation[j] \/= markers.Length; if (position[2] == 0) return; angle[0] = Math.Atan2(position[0], position[2]) * (180 \/ Math.PI); angle[1] = Math.Atan2(position[1], position[2]) * (180 \/ Math.PI); distance = Math.Sqrt(Math.Pow(position[0], 2) \u002b Math.Pow(position[1], 2) \u002b Math.Pow(position[2], 2)); } </p><p>画像処理</p><p>ARマーカー</p><p>追従対象</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/opencv\/recognition\/description\/"
						},
						
						{
							value: "トイドローンTello",
							label: "<p>Telloについて\nTello標準SDKについて\nTelloの制御に使ったもの\nTelloのカメラ映像の取得\n自動追従\nTelloの使い方\n</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/tello\/"
						},
						
						{
							value: "ARマーカーについて",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/opencv\/ar_marker\/"
						},
						
						{
							value: "GitHubの使い方",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/edit\/github\/"
						},
						
						{
							value: "Tello標準SDKについて",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/tello\/tellosdk\/"
						},
						
						{
							value: "Unityプロジェクト内での開発",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/unity\/unityproject\/"
						},
						
						{
							value: "VRヘッドセット HP Reverb G2の使い方",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/howtouse\/reverbg2\/"
						},
						
						{
							value: "画像処理",
							label: "<p>OpenCVの基礎知識\nARマーカーについて\nパラメータ（カメラ行列、歪み）の取得\n追従対象の認識\n</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/opencv\/"
						},
						
						{
							value: "Blenderを用いた3Dモデルの作成",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/unity\/blender\/"
						},
						
						{
							value: "Telloの使い方",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/howtouse\/tello\/"
						},
						
						{
							value: "Telloの制御に使うもの",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/tello\/tellolib\/"
						},
						
						{
							value: "パラメータ（カメラ行列、歪み）の取得",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/opencv\/parameter\/"
						},
						
						{
							value: "記事の書き方",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/edit\/article\/"
						},
						
						{
							value: "システム・機材の使い方",
							label: "<p>デスクトップPCの使い方\nVRヘッドセット HP Reverb G2の使い方\nTelloの使い方\nBunshin Drone 3システムの使い方\n</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/howtouse\/"
						},
						
						{
							value: "Bunshin Drone 3システムの使い方",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/howtouse\/system\/"
						},
						
						{
							value: "Telloのカメラ映像の取得",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/tello\/video\/"
						},
						
						{
							value: "このウェブサイトが出来るまで",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/edit\/howtomake\/"
						},
						
						{
							value: "追従対象の認識",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/opencv\/recognition\/"
						},
						
						{
							value: "引継ぎ資料の編集方法",
							label: "<p>初期セットアップ\nGitHubの使い方\n記事の書き方\nこのウェブサイトが出来るまで\n</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/edit\/"
						},
						
						{
							value: "自動追従",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/tello\/autotracking\/"
						},
						
						{
							value: "1.移動距離の計算について",
							label: "<p>MathJax.Hub.Config({\rtex2jax: {\rinlineMath: [[\u0027$\u0027,\u0027$\u0027], [\u0027\\\\(\u0027,\u0027\\\\)\u0027]],\rdisplayMath: [[\u0027$$\u0027,\u0027$$\u0027], [\u0027\\\\[\u0027,\u0027\\\\]\u0027]],\rprocessEscapes: true,\rprocessEnvironments: true,\rskipTags: [\u0027script\u0027, \u0027noscript\u0027, \u0027style\u0027, \u0027textarea\u0027, \u0027pre\u0027],\rTeX: { equationNumbers: { autoNumber: \u0022AMS\u0022 },\rextensions: [\u0022AMSmath.js\u0022, \u0022AMSsymbols.js\u0022] }\r}\r});\rMathJax.Hub.Queue(function() {\r\/\/ Fix  tags after MathJax finishes running. This is a\r\/\/ hack to overcome a shortcoming of Markdown. Discussion at\r\/\/ https:\/\/github.com\/mojombo\/jekyll\/issues\/199\rvar all = MathJax.Hub.getAllJax(), i;\rfor(i = 0; i 『2.移動距離に関する制御のコード』では「他のファイルで計算された」と表記したが、その箇所に関しての説明をここで行う。\n移動距離の計算は「TelloRequestCalculation02.cs」で行われており、前後移動、左右移動、旋回の3つについての移動距離の計算を行う。\n前提の説明 「TelloRequestCalculation02.cs」で値を送る前に、「TelloController1122.cs」ではARマーカーとの距離の値を取得する。\n円中心の三角形がARマーカーを付けた追従対象で、左下にあるものがドローンとする。この時、下のコードから3つのパラメーターを受け取る。\ndouble targetPosX = textureSender.estimater.position[0]; \/\/ 左右方向の距離 double targetPosZ = textureSender.estimater.position[2]; \/\/ 前後方向の距離 double targetRotY = textureSender.estimater.rotation[1]; \/\/ ARマーカーとの角度 targetPosX → ドローンとARマーカーまでの横方向の距離\ntargetPosZ → ドローンとARマーカーまでの前方向の距離\ntargetRotY → ドローンから見たARマーカーの角度(右方向に\u002b、左方向に-)\nこの時、取得できる単位は X,Y は[m]、 Y は[°]であることに気を付ける。\n「TelloRequestCalculation02.cs」内の説明 まず、TelloとARマーカーがどれだけ離れて追従するかを設定する。\n\/\/ 単位は[cm] private static double targetDistance = 2; この場合2m離れて追従する設定となり、この値が基準値となって以下の計算を行う。\n単位は[cm] と書いてあるが本当は 単位は[m]であることに気を付けて下さい！\nなお、これより以下の計算では、角度はラジアンで扱う点に注意する。\n  x軸方向(左右)の計算   式：$MoveX=targetPosX-targetDistance×\\sin(targetRotY)$\n\/\/x軸方向(左右)の計算 public static double CalculateRequestMoveX(double targetPosX, double targetRotY) { \/\/ 引数は単位が[m]  return targetPosX - targetDistance * Math.Sin(targetRotY * Mathf.Deg2Rad); }   y軸方向(前後)の計算   式：$MoveZ=targetPosZ-targetDistance×\\sin(targetRotY)$\n\/\/y軸方向(前後)の計算 public static double CalculateRequestMoveY(double targetPosZ, double targetRotY) { \/\/ 引数は単位が[m]  return targetPosZ - targetDistance * Math.Cos(targetRotY * Mathf.Deg2Rad); }   旋回の計算   Yの大きさによって旋回の向きを変える\npublic static double CalculateRequestRoteY(double targetRotY) { return (targetRotY \u0026lt;= 180) ? targetRotY * Mathf.Deg2Rad : (targetRotY - 360) * Mathf.Deg2Rad; } </p><p>Tello</p><p>追従</p><p>計算式</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/tello\/autotracking\/calculation\/"
						},
						
						{
							value: "システム創成2021 CIC担当チーム 引継ぎ資料",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/"
						},
						
						{
							value: "1.主となる制御のコード",
							label: "<p>注意事項 スクリプト内にTelloControllerの名前のファイルが二つ存在する場合、使われているファイルは「TelloController1122.cs」であることに気を付ける。\nファイル内の大まかな説明 ドローンの移動の制御は「TelloController1122.cs」のUpdate内のswitch内で行われる。ドローンが自動で移動するサイクルは「Stop」,「TakeOff」,「TakingOff」,「Detect」,「Follow」,「Land」,「Landing」に分かれる。\n  「Stop」   Telloが受けているコマンドの状態の初期化。\nSキーが入力されると、「TakeOff」に移行する。\n  「TakeOff」   Telloが離陸する段階。\ntakeoffのコマンドを送ったのち、「TakingOff」に移行する。\n  「TakingOff」   Telloが離陸して上昇、旋回してARマーカーを探す段階。\n離陸自体は瞬時に終了するが、ARマーカーを探すために高度を合わせる。\n（waitTimerが3以上4以下の時）今回は追従対象が決まっていたため固定値分上昇させた。\n（waitTimerが4以上の時）ARマーカーを認識するまで旋回を続ける。認識に成功したとき、 「Follow」に移行する。\n  「Detect」   「Follow」に移行する役割。今回は未使用。\n  「Follow」   Telloが追従していることを示す段階。この段階が続いている限りTelloは追従を続ける。\nLキーが入力されると、「Land」に移行する。\n  「Land」   Telloが着陸する段階。\nlandのコマンドを送ったのち、「Landing」に移行する。\n  「Landing」   Telloが着陸している段階。\n実質的にシステム終了の段階である。\n</p><p>Tello</p><p>tello</p><p>ドローン</p><p>制御</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/tello\/tellolib\/controller\/"
						},
						
						{
							value: "1.基本性能",
							label: "<p>Telloについて dji社の販売しているトイドローン。\nバッテリー駆動のドローンでバッテリーの続く限り飛行する。\n- 搭載機能   機体  重量（プロペラガード含）： 87g 最大速度： 28.8km\/h 最大飛行時間： 13分（無風、定速15km\/h） 動作環境温度： 0 ~ 40 ℃ 動作周波数帯： 2.4 ~ 2.4835GHz トランスミッター（EIRP）： 20dBm（FCC）, 19dBm（CE,SRRC,MIC）    カメラ  最大静止画面サイズ： 2592 × 1936 動画記録モード： HD 1280 × 720 30p 動画フォーマット： MP4    フライトバッテリー  容量： 1,100mAh 電圧： 3.8V バッテリータイプ： LiPo 電力量： 4.18Wh 正味重量： 25 ± 2g 充電温度範囲： 5 ~ 45 ℃ 最大充電電力： 10W    Telloユーザーマニュアル より引用\n- 実際の飛行時間 について Telloの改造（別ページ）により、飛行時間が約10分ほどまで飛び続ける。\nしかし、Tello本体が熱を持ちすぎると動作が止まったり利かなくなったりすることがある。そのため実際に運用するときには、動かす場合は熱を持たないように早いうちに飛ばしたり、複数のドローンやバッテリーを使いまわすことによって冷ましながら運用をすることが重要になる。\n- ライトによる状態の説明 Telloの前方にはLEDのライトがついており、それを見ることでTelloが元現在どのような状況であるかを認識できる。\nよくみたLEDのサインを列挙するが、ここに挙げたものはあくまで一例であるため下記のサイトやその他のサイトを参考にするとよい。\n  パターン  通常時（非飛行時）  カラフルに点滅  Wi-fiと未接続   黄色点滅  Wi-Fiとの接続確認     飛行時  緑色点滅  問題なく飛行   赤色点滅  バッテリー残量が少ない     充電時  青色点滅  充電中   青色点灯  充電完了        参考：Tello　LED点滅パターン（機体のステータス確認）\n注意点 Telloは風に弱く、エアコンの風であおられて移動してしまうこともあり室外では上手く飛ばせない。そのため、室外で運用するような物を作ろうとする際には、Tello以外のドローンを使うようにCICさんに頼むとよい。\n室内で飛ばす場合にも、扇風機やエアコン・換気扇などの影響を考えながら避けたり止めたりして行うと正しい挙動が確認できる。\n</p><p>坂</p><p>Tello</p><p>ドローン</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/tello\/tello\/performance\/"
						},
						
						{
							value: "2.Telloの改造",
							label: "<p>注意 改造については公式から出されたものではないため扱いには気を付ける。\n実際に触る部分はカバーのところがメインであるため壊すことはないと思うが、怖いものは怖いため気を付けておく。\n改造箇所 前述のとおり、改造の主な部分は天板の白い部分である。\n目的としてはTello内の風通しを良くして、飛行することでTello自体の熱を冷ますことである。この作業によってTelloのオーバーヒートの発生が少なくなり長時間の飛行が可能になった。\n改造箇所は3か所ある。\n  天板\n側面を覆う様になっている斜めの箇所を爪の部分を避けて切り取る。天板を外す際は、バッテリーの挿入口側から隙間を少しずつ開けていき、天板全体が少し浮いたら少し力を込めることで外すことができる。\n天板を付け直す際は、爪をあわせて軽い力で上から押さえつける。すると「カチッ」という音が鳴るのでそれで終了。\n  底面の棒\nTelloの裏側を見ると6本の棒が縦格子状についている。\nその棒を根元からすべて切り離す。\n  バッテリーの下にある板\nバッテリーを挿入する箇所の底に薄い板状のものが存在する。\n両面テープでくっついているため、なにか薄い物で持ち上げた後に引っこ抜くことでとれる。板が取れたら両端の突起を切断する。\n元に戻す際には向きに気を付けて戻す。\n  </p><p>Tello</p><p>ドローン</p><p>改造</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/tello\/tello\/remodeling\/"
						},
						
						{
							value: "TelloSDKについて",
							label: "<p>TelloSDK 基本的に以下のサイトを見ればわかる。\n ニート翔ぶ～C#でドローンを飛ばす～\n 主なTelloコマンド  command\nSDKモードに入る（1番最初に命令するコマンド） takeoff\nTelloが離陸する land\nTelloが着陸する emergency\n全てのモーターが止まる（緊急着陸） streamon\nビデオストリームをON streamoff\nビデオストリームをOFF up x\nx cm上昇 down x\nx cm下降 left x\nx cm左へ right x\nx cm右へ forward x\nx cm前進 back x\nx cm後退 cw x\nx 度時計回りに旋回 ccw x\nx 度反時計回りに旋回  注意事項  15秒間Telloになにも命令が送られないと、自動で着陸する。 途中で命令が聞かなくなった場合はバッテリー切れを待つか、他のPCからWi-fiをつなぎ直して命令を送ることで命令が送れる時がある。  </p><p>tello</p><p>SDK</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/tello\/tellosdk\/tellosdk\/"
						},
						
						{
							value: "2.移動距離に関する制御のコード",
							label: "<p>ファイル内の大まかな説明 移動距離に関する制御のコードは「TelloController1122.cs」内に存在し、大まかに2つの段階に分かれる。\n1つが移動する距離を求める段階であり、もう1つが求めた距離に対して重みを付けて実際の移動する距離を求める段階である。\n段階を2つに分ける理由として、理想の移動距離を求めて移動指示を出した場合、実際のTelloの挙動によりVR視点で酔ってしまった点やARマーカーをカメラの画角外に外してしまうという問題が発生した点があげれられる。そのため、重みを付けて実際の移動距離にバイアスをかけることによって製品として扱いやすいような挙動をさせることができた。\nしかし、重みづけの箇所については不十分であるため、さらに細かく調整する必要がある。\n段階Ⅰ「(理想の)移動する距離を求める段階」 「TelloController1122.cs」内の219～227行目が該当する。\n220～222行でARマーカーとの距離と角度を推定した値を取得、その後、225～227行で他のファイルで計算された(理想の)移動距離を取得している。\n段階Ⅱ「実際の移動距離を求める段階」 「TelloController1122.cs」内の183～213行目が該当する。\n段階Ⅰで取得した移動距離の値をもとに、重みづけを行って実際の挙動を安定させることを目的としている。\n重みづけの種類は前方向、横方向、旋回の3つの種類に分かれている。3つの中で共通していることは動く値が小さいときはさらに動きを小さくし、大きく動くときはその値に近しいように動くように重みを設定した。\n</p><p>Tello</p><p>自動追従</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/tello\/tellolib\/move_cal\/"
						},
						
						{
							value: "2.重みづけをした実際の移動距離の計算",
							label: "<p>これはテストページです。\n</p><p>Tello</p><p>追従</p><p>計算式</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/tello\/autotracking\/weighting\/"
						},
						
						{
							value: "ARマーカーの作成",
							label: "<p>ARマーカーの作成方法(C#, Unity)  新しいUnityプロジェクトを作成 OpenCVforUnityをインポート ARマーカー作成用のスクリプトを作成 以下のようにコードを変更 \/\/ここから using OpenCVForUnity.CoreModule; using OpenCVForUnity.ArucoModule; using OpenCVForUnity.ImgcodecsModule; \/\/ここまでが追加する名前空間 using UnityEngine; public class CreateARmarker : MonoBehaviour { Dictionary ARdict; Mat ARmat; bool isCreated; \/\/ Start is called before the first frame update  void Start() { ARdict = Aruco.getPredefinedDictionary(Aruco.DICT_4X4_50); ARmat = new Mat(); \/\/ nの値が作成するARマーカーの枚数  \/\/ iの値が作成するARマーカーのID  int n = 4, i; for (i = 0; i \u0026lt; n; i\u002b\u002b) { \/\/ ARマーカーの画像情報をARmatに格納  Aruco.drawMarker(ARdict, i, 150, ARmat); string fileName = \u0026#34;id_\u0026#34; \u002b i.ToString() \u002b \u0026#34;.png\u0026#34;; \/\/ ARマーカーの画像ファイルを作成  isCreated = Imgcodecs.imwrite(\u0026#34;Assets\/ARmarkers\/\u0026#34; \u002b fileName, ARmat); \/\/ 確認用ログ  if (isCreated) Debug.Log(string.Format(\u0026#34;create {0}\u0026#34;, i)); } } \/\/ Update is called once per frame  void Update() { } }  空のオブジェクトを作成。そのオブジェクトに作成したスクリプトをアタッチ Assetsフォルダに「ARmarkers」という名前のフォルダを作成 実行 → 指定したフォルダに画像ファイルが生成されている 印刷  ※OpenCV for Unity試用版ではARマーカーにロゴが入ってしまう。\n</p><p>画像処理</p><p>ARマーカー</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/opencv\/ar_marker\/createarmarker\/"
						},
						
						{
							value: "ARマーカーの検出",
							label: "<p>カメラ映像を取り込む OpenCV for UnityでARマーカーの検出を行う際、画像をMatクラスにする必要がある。\n基のシステムでTelloのカメラ映像をオブジェクトのTextureに変換して表示していたため、\nTexture →(TextureSender)→ Texture2D →(OpenCV for Unity)→ Mat\n という手順で変換している。\n 画像をARマーカーの検出に送る用スクリプトを作成 以下のようにコードを変更  このスクリプトでは、オブジェクトのTextureをTexture2Dに変換し、さらにARマーカー検出するEstimateメソッドを呼び出している。\nusing System.Collections; using System.Collections.Generic; using UnityEngine; \/\/独自の名前空間 using EstimateTargetTransform_OCVfU; public class TextureSender : MonoBehaviour { \/\/ CameraParaCal cameraPara;  public EstimateTra estimater; Texture2D texture; Texture2D result; RenderTexture rt; Rect source; \/\/ Start is called before the first frame update  void Start() { \/\/ cameraPara = new CameraParaCal();  estimater = new EstimateTra(); } public Texture2D ToTexture2D(Texture self) { var sw = self.width; var sh = self.height; var format = TextureFormat.RGBA32; result = new Texture2D(sw, sh, format, false); var currentRT = RenderTexture.active; rt = new RenderTexture(sw, sh, 32); Graphics.Blit(self, rt); RenderTexture.active = rt; source = new Rect(0, 0, rt.width, rt.height); result.ReadPixels(source, 0, 0); result.Apply(); RenderTexture.active = currentRT; return result; } \/\/ Update is called once per frame  void Update() { texture = ToTexture2D(GetComponent\u0026lt;Renderer\u0026gt;().material.mainTexture); estimater.Estimate(texture); Destroy(result); Destroy(rt); } } スクリーンとなるオブジェクトにアタッチ  画像からARマーカーの検出 呼び出したEstimateメソッドでは、画像をTexture2DからMatへ変換しARマーカーの検出を行っている\npublic void Estimate(Texture2D texture) { Mat img = new Mat(texture.height, texture.width, CvType.CV_8UC3); Utils.texture2DToMat(texture, img); \/* * ARマーカーの検知 * 6cm四方だと2mぐらいまではっきり検知可能 *\/ Aruco.detectMarkers(img, dictionary, corners, ids, parameters, rejectedImgPoints); \/* 以下略 *\/ }   ARマーカーを検出する Aruco.detectMarkers(\/*画像*\/, \/*ARマーカーの辞書*\/, \/*ARマーカーの角(Out)*\/, \/*ARマーカーのID(Out)*\/, \/*検出のパラメータ*\/, \/*異常検出用(Out)*\/) ※第5,6引数は使っていないため与えなくても問題なく動作するとは思う(試していない)。createメソッドで検出のパラメータを設定しているがリファレンスに何も書いていないため、おそらくデフォルトのまま  </p><p>画像処理</p><p>ARマーカー</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/opencv\/ar_marker\/detectarmarker\/"
						},
						
						{
							value: "カメラの特徴に関する前置き",
							label: "<p>MathJax.Hub.Config({\rtex2jax: {\rinlineMath: [[\u0027$\u0027,\u0027$\u0027], [\u0027\\\\(\u0027,\u0027\\\\)\u0027]],\rdisplayMath: [[\u0027$$\u0027,\u0027$$\u0027], [\u0027\\\\[\u0027,\u0027\\\\]\u0027]],\rprocessEscapes: true,\rprocessEnvironments: true,\rskipTags: [\u0027script\u0027, \u0027noscript\u0027, \u0027style\u0027, \u0027textarea\u0027, \u0027pre\u0027],\rTeX: { equationNumbers: { autoNumber: \u0022AMS\u0022 },\rextensions: [\u0022AMSmath.js\u0022, \u0022AMSsymbols.js\u0022] }\r}\r});\rMathJax.Hub.Queue(function() {\r\/\/ Fix  tags after MathJax finishes running. This is a\r\/\/ hack to overcome a shortcoming of Markdown. Discussion at\r\/\/ https:\/\/github.com\/mojombo\/jekyll\/issues\/199\rvar all = MathJax.Hub.getAllJax(), i;\rfor(i = 0; i カメラで撮影される映像(画像)は、カメラのレンズなどの種類によって写し方、歪みが様々である。 ARマーカーの正しい距離や回転を求めるために、カメラの内部行列と歪み係数を計算しておく必要がある。\n  内部行列\n $ 3 \\times 3 $の行列\n\r$ \\begin{bmatrix}\rf_x \u0026 0 \u0026 c_x \\\\\r0 \u0026 f_y \u0026 c_y \\\\\r0 \u0026 0 \u0026 1\r\\end{bmatrix}\r$\r\rカメラを原点とする3次元の座標から画像の左上を原点とする2次元の座標に変換する役割がある。\n逆に、2次元の画像座標から3次元の画像座標を計算するのにも使える。\n$f_x, f_y$はスケーリングとしての役割。\n  $c_x, c_y$は画像座標の原点を左上にする役割がある。   歪み係数\n 5つの係数を持つ配列$(k_1, k_2, p_1, p_2[, k_3])$。\n上記の内部行列だけではカメラのレンズによる歪みを考慮できていない。\n歪み係数はその歪みを考慮するための係数。\n$k_3$は指定しなければ0になる。\n  参考\n OpenCVでのキャリブレーション 内部行列の解説1 内部行列の解説2 pythonのコード    </p><p>画像処理</p><p>カメラパラメータ</p><p>カメラキャリブレーション</p><p>内部行列</p><p>歪み</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/opencv\/parameter\/description\/"
						},
						
						{
							value: "カメラ行列の計測",
							label: "<p>カメラ行列・歪み係数の計測の方法  以下の内容のスクリプトを作成。  using System; using System.Collections; using System.Collections.Generic; using OpenCVForUnity.Calib3dModule; using OpenCVForUnity.ImgprocModule; using OpenCVForUnity.CoreModule; using OpenCVForUnity.ArucoModule; using OpenCVForUnity.UnityUtils; using UnityEngine; namespace EstimateTargetTransform_OCVfU { public class CameraParaCal { private Mat img; private Mat gray; private Size crossNum; private List\u0026lt;Mat\u0026gt; objPoints; private List\u0026lt;Mat\u0026gt; imgPoints; private Mat pattern_points; public Mat cameraMatrix; public Mat distCoeffs; public double[] cameraArray; public double[] distArray; bool calculating; \/\/ Start is called before the first frame update  public CameraParaCal() { gray = new Mat(); objPoints = new List\u0026lt;Mat\u0026gt;(); imgPoints = new List\u0026lt;Mat\u0026gt;(); pattern_points = new Mat(); cameraMatrix = new Mat(); distCoeffs = new Mat(); calculating = true; int w, h; float pattern_size = 2.0f; crossNum = new Size(7.0, 7.0); Point3[] a = new Point3[7 * 7]; for (h = 0; h \u0026lt; 7; h\u002b\u002b) { for (w = 0; w \u0026lt; 7; w\u002b\u002b) { a[h * 7 \u002b w] = new Point3(w * pattern_size, h * pattern_size, 0); } } MatOfPoint3f b = new MatOfPoint3f(a); b.copyTo(pattern_points); } \/\/ Update is called once per frame  public void DataSampling(Texture2D texture, int calcPoint = 40) { img = new Mat(texture.height, texture.width, CvType.CV_8UC3); Utils.texture2DToMat(texture, img); if (img == null) return; if (!calculating) return; CalcPara(); Debug.Log(\u0026#34;Sampling \u0026lt;=== \u0026#34; \u002b objPoints.Count \u002b \u0026#34; \/ \u0026#34; \u002b calcPoint \u002b \u0026#34; ===\u0026gt; \u0026#34;); System.Threading.Thread.Sleep(200); if (calculating \u0026amp;\u0026amp; objPoints.Count.Equals(calcPoint)) { Debug.Log(\u0026#34;Calculating...\u0026#34;); CaliCamera(); calculating = false; cameraArray = new double[cameraMatrix.rows() * cameraMatrix.cols() * cameraMatrix.channels()]; distArray = new double[distCoeffs.rows() * distCoeffs.cols() * distCoeffs.channels()]; cameraMatrix.get(0, 0, cameraArray); distCoeffs.get(0, 0, distArray); int i, j; Debug.Log(\u0026#34; --- cameraMatrix --- \u0026#34;); for (i = 0; i \u0026lt; 3; i\u002b\u002b) { for (j = 0; j \u0026lt; 3; j\u002b\u002b) { \/\/ Debug.Log(cameraArray.Length);  Debug.Log(String.Format(\u0026#34;{0:00000.00000000}, \u0026#34;, cameraArray[i * 3 \u002b j])); } } Debug.Log(\u0026#34; --- distMatrix --- \u0026#34;); for (i = 0; i \u0026lt; distArray.Length; i\u002b\u002b) { Debug.Log((String.Format(\u0026#34;{0:00000.00000000},\u0026#34;, distArray[i]))); } } } private void CalcPara() { bool patternFound; Imgproc.cvtColor(img, gray, Imgproc.COLOR_BGR2GRAY); MatOfPoint2f corners = new MatOfPoint2f(); patternFound = Calib3d.findChessboardCorners(gray, crossNum, corners); \/* * corners * Channels : 2 * Rows : 49 * Cols : 1 *\/ if (patternFound) { TermCriteria term = new TermCriteria(TermCriteria.EPS | TermCriteria.COUNT, 30, 0.1); Imgproc.cornerSubPix(gray, corners, new Size(5, 5), new Size(-1, -1), term); imgPoints.Add(corners); objPoints.Add(pattern_points); } } private void CaliCamera() { List\u0026lt;Mat\u0026gt; rvecs = new List\u0026lt;Mat\u0026gt;(); List\u0026lt;Mat\u0026gt; tvecs = new List\u0026lt;Mat\u0026gt;(); Calib3d.calibrateCamera(objPoints, imgPoints, gray.size(), cameraMatrix, distCoeffs, rvecs, tvecs); } } } TextureSenderクラスのUpdateメソッドを以下のように書き換える。  public class TextureSender : MonoBehaviour { CameraParaCal cameraPara; \/\/←追加  \/\/ public EstimateTra estimater; \/\/←コメントアウト  Texture2D texture; Texture2D result; RenderTexture rt; Rect source; \/\/ Start is called before the first frame update  void Start() { cameraPara = new CameraParaCal(); \/\/←追加  \/\/ estimater = new EstimateTra(); \/\/←コメントアウト  } \/* * 省略 *\/ void Update() { \/\/ 追加  time \u002b= Time.deltaTime; if (time \u0026gt; 0.2f) { texture = ToTexture2D(GetComponent\u0026lt;Renderer\u0026gt;().material.mainTexture); cameraPara.DataSampling(texture); time = 0.0f; } \/\/ 追加ここまで  \/* コメントアウト texture = ToTexture2D(GetComponent\u0026lt;Renderer\u0026gt;().material.mainTexture); estimater.Estimate(texture); *\/ Destroy(result); Destroy(rt); } } プログラムを実行し、カメラに以下の画像を向ける  指定した回数(上記プログラムだと40回)サンプリングできたらパラメータの計算が始まる\n(かなり時間がかかる)。 計算が終わるとパラメータの情報を出力するのでメモする。 サンプリングで誤差が出るので何度か(サンプリング→計算)を繰り返し、平均を出す。\n※1回のサンプリング数を増やすならば何度も繰り返す必要性は減る  </p><p>画像処理</p><p>カメラパラメータ</p><p>カメラキャリブレーション</p><p>歪み</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/opencv\/parameter\/calculation\/"
						},
						
						{
							value: "テスト記事",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/edit\/article\/testarticle\/"
						},
						
						{
							value: "テスト記事",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/edit\/github\/testarticle\/"
						},
						
						{
							value: "テスト記事",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/edit\/howtomake\/testarticle\/"
						},
						
						{
							value: "テスト記事",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/edit\/setup\/testarticle\/"
						},
						
						{
							value: "テスト記事",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/howtouse\/pc\/testarticle\/"
						},
						
						{
							value: "テスト記事",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/howtouse\/reverbg2\/testarticle\/"
						},
						
						{
							value: "テスト記事",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/howtouse\/system\/testarticle\/"
						},
						
						{
							value: "テスト記事",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/howtouse\/tello\/testarticle\/"
						},
						
						{
							value: "テスト記事",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/tello\/video\/testarticle\/"
						},
						
						{
							value: "テスト記事",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/unity\/unityproject\/testarticle\/"
						},
						
						{
							value: "テスト記事2",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/edit\/article\/testarticle2\/"
						},
						
						{
							value: "テスト記事2",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/edit\/github\/testarticle2\/"
						},
						
						{
							value: "テスト記事2",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/edit\/howtomake\/testarticle2\/"
						},
						
						{
							value: "テスト記事2",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/edit\/setup\/testarticle2\/"
						},
						
						{
							value: "テスト記事2",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/howtouse\/pc\/testarticle2\/"
						},
						
						{
							value: "テスト記事2",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/howtouse\/reverbg2\/testarticle2\/"
						},
						
						{
							value: "テスト記事2",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/howtouse\/system\/testarticle2\/"
						},
						
						{
							value: "テスト記事2",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/howtouse\/tello\/testarticle2\/"
						},
						
						{
							value: "テスト記事2",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/tello\/video\/testarticle2\/"
						},
						
						{
							value: "テスト記事2",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/unity\/steamvr\/testarticle2\/"
						},
						
						{
							value: "テスト記事2",
							label: "<p>これはテストページです。\n</p><p>田中</p><p>test</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/unity\/unityproject\/testarticle2\/"
						},
						
						{
							value: "Test_by_tsuchiya",
							label: "<p>Hello World このファイルは1回目のテストです。 箇条書きの練習\n リアルタイム映像 プロジェクト 画像認識  ARマーカー   ドローン  </p><p>著者名</p><p>Unity</p><p>ドローン</p><p>使い方</p><p>不具合</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/alpha\/a\/test_by_tsuchiya\/"
						},
						
						{
							value: "Test_by_ban",
							label: "<p>とりあえず使ってみた テストを兼ねて作成。実際にページを作成し、\n使った機能  ドローン パソコン VR やる気 根気 努力 友情 勝利  丸罰ゲーム    ここに うって いく。     ○ 罰 ○    罰    ○ 罰     まとめ いかがでしたでしょうか？もしよければチャンネル登録、高評価、Twitterのフォローなどなどをお願いします。\n</p><p>著者名</p><p>Unity</p><p>ドローン</p><p>使い方</p><p>不具合</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/alpha\/a\/test_by_ban\/"
						},
						
						{
							value: "TestCategory1",
							label: "<p>ここはテストページです。\ncatA\ncatB\n</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/alpha\/"
						},
						
						{
							value: "連絡先",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/address\/"
						},
						
						{
							value: "Test1",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/alpha\/a\/"
						},
						
						{
							value: "Test2",
							label: "<p>first This is a test page\u0026hellip;\n</p><p>testtag</p><p>something</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/alpha\/a\/test\/"
						},
						
						{
							value: "Test2",
							label: "<p>first This is a test page\u0026hellip;\n</p><p>testtag</p><p>something</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/alpha\/b\/test\/"
						},
						
						{
							value: "Test3",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/alpha\/b\/"
						},
						
						{
							value: "Blenderの使い方",
							label: "<p>1.Blenderの基本操作\n大前提として私が触っていたBlenderは2.93.1時点のものです。これからアップデートで変わる可能性もあるので最新の資料を調べて参考にしていただければ幸いです。 また、私もBlender歴が長いわけではなくまだまだ分からないことのほうが多いので調べていただいた方が分かりやすい記事が多いかと思うのでそちらを参考になさっても構いません。(分かりやすいもの、好きなものでお勉強するのが一番だと思います。)\n全ての機能を説明するのは難しいので今回説明するのは簡単な基本操作やよく使うモードなどに留めておきます。\n2.動かし方\n最初にマウスの動かし方などの説明をします。\n3.モード\nオブジェクトを操作するにあたってモードというものを選択して操作を行います。 よく使われるものは「オブジェクトモード」と「編集モード」です。 画像の上から1番目がオブジェクトモードで2番目が編集モードです。これらのモードの切り替えはBlenderを開いたときの左上にあります。 最初にオブジェクトモードの操作の説明を行います。 オブジェクトモードは基本的にオブジェクトの移動や大きさの変更などが可能です。\n上の二つは、クリックしたときのモードを切り替えられるものになっています。 マウスカーソルのようなアイコンの方はボックス選択といって\n最後に参考にしたサイトを載せておきます。\n</p><p>Blender</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/unity\/blender\/testarticle2\/"
						},
						
						{
							value: "Blenderの導入",
							label: "<p>0.最初に\nBlenderとは無償で提供されている統合3DCGソフトです。 3Dモデルなどなどを自在に作ることはできますが、Steamには「Unity Asset Store」がありますのでそちらにどうしてもないものを作るのが良いと思います。 Unity Asset Storeとは他のクリエイターさんが作った3Dモデル、アニメーション制作のための素材、オーディオ、テクスチャなどがダウンロードできるサイトです。 最初からすべてのモデルを作るのもいいですが時間がかかってしまうのでもしもUnity Asset Storeで揃うのでしたらそちらを使うのをお勧めします。 詳しくはUnity Asset Storeの使い方の記事をご覧ください。\n1.Blenderをインストールする\nBlenderはこちらのサイトからインストールすることができます。\nBlenderのダウンロードサイト\nリンク先に飛んだら青い「Download Blender バージョン名」というボタンがあるのでクリックしてください。 ダウンロードされたインストーラーを流れに沿って進みBlenderをインストールしてください。 これでBlenderのインストールは終了です。\n2.Blenderの日本語化\nまず最初に日本語化について説明します。 英語のままでよい人はスルーしてください。\n左上のメニューに「Edit \u0026gt; Preferences」でBlender Preferencesウィンドウを開きます。 「Interface」の中に「Translation」というチェックボックスがあるのでそこをクリックしてください。 TranslationのLanguageを「Japanese(日本語)」と選択し、「Tooltips」と「Interface」というチェックボックスにもチェックを付けてください。 これで日本語化は終了です。\n最後に参考にしたサイトを載せておきます。\n参考サイト\n</p><p>Blender</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/unity\/blender\/testarticle\/"
						},
						
						{
							value: "SteamVRの導入",
							label: "<p>SteamVRの導入に関してです。\n1.Steamをインストールする。\nSteamVRを動かすにはSteamを入れる必要があるのでまずSteamをインストールします。 まずSteamのサイトに行きます。\nSteamのサイト\nこちらのサイトの上の方にSteamをインストールという文字があるのでここからインストールできます。\n2.Steamの起動\nインストールが終わったらSteamにログインをします。 ここは私の代(bunshin-drone3の代)が作ったアカウントがあるのでこれを使ってくれるもよし。新しく作ってもらってもよしです。 詳しいアカウントの詳細は企業さんに聞いてください。\n3.SteamVRの起動\nログインしたらSteamの右上にVRというマークが表示されているかと思うのでそちらをクリックしてください。 もしも表示されていなかったらヘッドマウントディスプレイ(VR機器のことです)が接続されていないと思いますのでそちらを確認してみてください。\n恐らく大丈夫だと思いますが、SteamVRがどうしても起動できないという場合はストアでSteamVRがライブラリに追加されているか確認してください。勝手に入っていたと思うのですが入っていなければこちらから手動でインストールをお願いします。\nSteamVRが起動出来たら以下のような小さなウィンドウが開かれると思います。 なお、VR機器が繋がっている状態の時は、ヘッドマウントディスプレイを始め、コントローラーなどの機器がこのウィンドウに表示されます。 これでSteamVRの導入は終わりです。\nこちらは実際に私が参考にしたURLです。もし見れなくなってしまっていたらごめんなさいね。大体の流れは今回書いた記事とほぼ同じです。\nこれはSteamVRをインストールするやりかたを書いてあるサイトです。 このサイトではUE4というゲームを作るときに使われるものでの利用ですがインストール自体はこれの通りで行いました。\n参考サイト\n</p><p>SteamVR</p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/unity\/steamvr\/installation\/"
						},
						
						{
							value: "Categories",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/categories\/"
						},
						
						{
							value: "Tags",
							label: "<p></p>",
							url:"https:\/\/sysdp2021-t03cic.github.io\/tags\/"
						},
						
					];
					$( "#search" ).autocomplete({
						source: projects
					})
					.data( "ui-autocomplete" )._renderItem = function( ul, item ) {
						return $( "<li>" )
						.append( "<a href=" + item.url + " + \" &quot;\" +  >" + item.value + "</a>" + item.label )
						.appendTo( ul );
					};
					});
				</script>
			</div>
		</div>
	</div>
</div>
<!-- /banner -->
    </header>
    <!-- /header -->
    
    

  
  <!-- topics -->
  <section class="section">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 text-center">
          <h2 class="section-title"></h2>
        </div>
        <!-- topic-item -->
        
        <div class="col-lg-4 col-sm-6 mb-4">
          <a href="https://sysdp2021-t03cic.github.io/unity/" class="px-4 py-5 bg-white shadow text-center d-block match-height">
            <i class="ti-desktop icon text-primary d-block mb-4"></i>
            <h3 class="mb-3 mt-0">Unityプロジェクト</h3>
            <p class="mb-0">Unityの使い方、Unity上で開発した物、Blenderを用いた3Dモデル作成などについて</p>
          </a>
        </div>
        
        <div class="col-lg-4 col-sm-6 mb-4">
          <a href="https://sysdp2021-t03cic.github.io/tello/" class="px-4 py-5 bg-white shadow text-center d-block match-height">
            <i class="ti-fullscreen icon text-primary d-block mb-4"></i>
            <h3 class="mb-3 mt-0">トイドローンTello</h3>
            <p class="mb-0">Telloの制御や映像の取得について</p>
          </a>
        </div>
        
        <div class="col-lg-4 col-sm-6 mb-4">
          <a href="https://sysdp2021-t03cic.github.io/opencv/" class="px-4 py-5 bg-white shadow text-center d-block match-height">
            <i class="ti-image icon text-primary d-block mb-4"></i>
            <h3 class="mb-3 mt-0">画像処理</h3>
            <p class="mb-0">OpenCV for Unityなど、画像処理について</p>
          </a>
        </div>
        
        <div class="col-lg-4 col-sm-6 mb-4">
          <a href="https://sysdp2021-t03cic.github.io/howtouse/" class="px-4 py-5 bg-white shadow text-center d-block match-height">
            <i class="ti-harddrives icon text-primary d-block mb-4"></i>
            <h3 class="mb-3 mt-0">システム・機材の使い方</h3>
            <p class="mb-0">Bunshin Drone 3 システムの使い方や、使用機材の使い方について</p>
          </a>
        </div>
        
        <div class="col-lg-4 col-sm-6 mb-4">
          <a href="https://sysdp2021-t03cic.github.io/edit/" class="px-4 py-5 bg-white shadow text-center d-block match-height">
            <i class="ti-pencil-alt icon text-primary d-block mb-4"></i>
            <h3 class="mb-3 mt-0">引継ぎ資料の編集方法</h3>
            <p class="mb-0">GitHubの使い方、記事の書き方、このウェブサイトの作り方など編集全般について</p>
          </a>
        </div>
        
      </div>
    </div>
  </section>
  <!-- /topics -->

  


    <!-- footer -->
<footer class="section pb-4">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-8 text-md-left text-center">
       <p class="mb-md-0 mb-4">Copyright © 2021 a Hugo theme by <a href="https://gethugothemes.com/">Gethugothemes</a></p>
      </div>
      <div class="col-md-4 text-md-right text-center">
        <ul class="list-inline">
          
          <li class="list-inline-item"><a class="text-color d-inline-block p-2" href="https://twitter.com/JetJaguar_PSX" aria-label="Twitter"><i class="ti-twitter-alt"></i></a></li>
          
          <li class="list-inline-item"><a class="text-color d-inline-block p-2" href="https://github.com/SysDP2021-t03CIC/SysDP2021-t03CIC.github.io" aria-label="Github"><i class="ti-github"></i></a></li>
          
        </ul>
      </div>
    </div>
  </div>
</footer>
<!-- /footer -->

<!-- Main Script -->

<script src="https://sysdp2021-t03cic.github.io/js/script.min.js"></script>
  </body>

</html>